// tipsy, facebook style tooltips for jquery
// version 1.0.0a
// (c) 2008-2010 jason frame [jason@onehackoranother.com]
// released under the MIT license
(function(e)  {e.fn.tipsy=function(t)  {t=e.extend({},e.fn.tipsy.defaults,t);return this.each(function()  {var n=e.fn.tipsy.elementOptions(this,t);e(this).hover(function()  {e.data(this,"cancel.tipsy",true);var t=e.data(this,"active.tipsy");if (!t)  {t=e('<div class="tipsy"><div class="tipsy-inner"/></div>');t.css({position:"absolute",zIndex:1e5} );e.data(this,"active.tipsy",t)}if (e(this).attr("title")||typeof e(this).attr("original-title")!="string")  {e(this).attr("original-title",e(this).attr("title")||"").removeAttr("title")}var r;if (typeof n.title=="string")  {r=e(this).attr(n.title=="title"?"original-title":n.title)}else if (typeof n.title=="function")  {r=n.title.call(this)}t.find(".tipsy-inner")[n.html?"html":"text"](r||n.fallback);var i=e.extend({},e(this).offset(),{width:this.offsetWidth,height:this.offsetHeight} );t.get(0).className="tipsy";t.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var s=t[0].offsetWidth,o=t[0].offsetHeight;var u=typeof n.gravity=="function"?n.gravity.call(this):n.gravity;switch(u.charAt(0))  {case"n":t.css({top:i.top+i.height,left:i.left+i.width/2-s/2}).addClass("tipsy-north");break;case"s":t.css({top:i.top-o,left:i.left+i.width/2-s/2}).addClass("tipsy-south");break;case"e":t.css({top:i.top+i.height/2-o/2,left:i.left-s}).addClass("tipsy-east");break;case"w":t.css({top:i.top+i.height/2-o/2,left:i.left+i.width}).addClass("tipsy-west");break}if (n.fade)  {t.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:.8})}else{t.css({visibility:"visible"})}},function()  {e.data(this,"cancel.tipsy",false);var t=this;setTimeout(function()  {if (e.data(this,"cancel.tipsy"))return;var r=e.data(t,"active.tipsy");if (n.fade)  {r.stop().fadeOut(function()  {e(this).remove()})}else{r.remove()}},100)})})};e.fn.tipsy.elementOptions=function(t,n)  {return e.metadata?e.extend({},n,e(t).metadata()):n};e.fn.tipsy.defaults={fade:false,fallback:"",gravity:"n",html:false,title:"title"};e.fn.tipsy.autoNS=function()  {return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"};e.fn.tipsy.autoWE=function()  {return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"}})(jQuery);